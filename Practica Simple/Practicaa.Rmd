---
title: "Games_Sales Data"
author: "Mia Wayar"
date: "2025-10-02"
output: 
  github_document: default
  html_document: default
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_format = "all") })
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## Librerias

```{r}
library(dplyr)
library(ggplot2)
```


## Lectura de datos

```{r}
#Archivo Kaggle - vgsales
vgventas <- read.csv("vgsales.csv",
                 stringsAsFactors = F,na.strings = ".",header = T,sep=",")
head(vgventas)
str(vgventas)
```

## Transformacion de los datos

```{r}
vgventas$Year <- as.integer(vgventas$Year)
vgventas$Genre <- as.factor(vgventas$Genre)
vgventas$Platform <- as.factor(vgventas$Platform)
vgventas$Publisher <- as.factor(vgventas$Publisher)
summary(vgventas)
```
```{r}
str(vgventas)
unique(vgventas$Year)
filter(vgventas, Year=="N/A")

```
```{r}
unique(vgventas$Platform)
filter(vgventas, Name=="FIFA 15")
hist(vgventas$NA_Sales )
```



## Géneros más vendidos

```{r}
vgventas %>%
  group_by(Genre) %>%
  summarise(Ventas_Totales = sum(Global_Sales)) %>%
  arrange(desc(Ventas_Totales)) %>%
  head(5)
```

Calculemos la proporcion de los datos missings Esto nos ayudará a decidir la estrategia (borrar vs. llenar)

```{r}
# Contar NA por columna
na_por_columna <- colSums(is.na(vgventas))
print("NA por columna:")
print(na_por_columna)

# Porcentaje de NA por columna
porcentaje_na <- colMeans(is.na(vgventas)) * 100
print("Porcentaje de NA por columna:")
print(round(porcentaje_na, 2))

```

```{r}
unique(vgventas$Publisher)
filter(vgventas, Publisher==" ")

```

Al año le faltan 271 valores (aprox 1,63%). Dado que este porcentaje es muy pequeño, la estrategia más segura y sencilla es eliminar estas filas. Intentar 'adivinar' (imputar) el año o la editorial podría generar interferencias y llevar a conclusiones incorrectas. Queremos que nuestro análisis se base en datos completos y precisos. Usaremos .dropna() para eliminar las filas que contienen valores NaN en las columnas especificadas.

```{r}
# DataFrame de ejemplo con missing values

print("DataFrame original:")
head(vgventas)
cat("Filas originales:", nrow(vgventas), "\n\n")

# Método 1: na.omit() - Elimina filas con cualquier NA
df_sin_na <- na.omit(vgventas)
print("Con na.omit():")
head(df_sin_na)
cat("Filas después de na.omit():", nrow(df_sin_na), "\n\n")

# Método 2: complete.cases() - Más control
df_completo <- vgventas[complete.cases(vgventas), ]
print("Con complete.cases():")
head(df_completo)
cat("Filas después de complete.cases():", nrow(df_completo), "\n")

```
```{r}
vgventas  <- vgventas[complete.cases(vgventas), ]
dim(vgventas)
```



# Tendencia Central

```{r}
summary(vgventas$Global_Sales)
hist(vgventas$Global_Sales)
```
```{r}
hist(filter(vgventas,Global_Sales < 5)$Global_Sales)
```
```{r}
set.seed(13)
N <- dim(vgventas)[1]
indices_muestra <- sample(1:N,200,replace = TRUE)
data.muestra<-vgventas[indices_muestra, ]
summary(data.muestra$Global_Sales)
```
```{r}
summary(vgventas$Global_Sales)

```
```{r}
dim(filter(vgventas, Global_Sales<2))
dim(vgventas)


dim( filter(vgventas, Global_Sales<2) )[1]  /  dim(vgventas)[1]
```
```{r}
vgventas.pobint <- filter(vgventas, Global_Sales<2)
summary(vgventas.pobint$Global_Sales)
```
```{r}
set.seed(10)
N <- dim(vgventas.pobint)[1]
indices_muestra <- sample(1:N,200,replace = TRUE)
data.muestra<-vgventas.pobint[indices_muestra, ]
summary(data.muestra$Global_Sales)
```

Graficos

```{r}
# Combinar ambos dataframes con una columna que identifique su origen
df_pob <- vgventas.pobint
df_pob$Tipo <- "Población"

df_muestra <- data.muestra
df_muestra$Tipo <- "Muestra"

# Unir ambos
df_combinado <- rbind(df_pob, df_muestra)

# Crear gráfico combinado
ggplot(df_combinado, aes(x = Global_Sales, fill = Tipo)) +
  geom_histogram(alpha = 0.5, bins = 20, position = "identity") +
  labs(title = "Comparación de Ventas Globales: Población vs Muestra",
       x = "Ventas Globales",
       y = "Frecuencia",
       fill = "Origen de los datos") +
  theme_minimal()

```



```{r}
# Extraer una muestra aleatoria de 300 datos
set.seed(123)  
muestra <- vgventas %>% sample_n(300)

# Calcular la media y desviación estándar de las variables numéricas (población)
estadisticas_poblacion <- vgventas %>%
  summarise_if(is.numeric, list(
    media = mean,
    desviacion = sd
  ), na.rm = TRUE)

# Calcular la media y desviación estándar de las variables numéricas (muestra)
estadisticas_muestra <- muestra %>%
  summarise_if(is.numeric, list(
    media = mean,
    desviacion = sd
  ), na.rm = TRUE)

# Comparar ambas
comparacion <- bind_rows(
  Poblacion = estadisticas_poblacion,
  Muestra = estadisticas_muestra,
  .id = "Origen"
)

# Mostrar la comparación
print(comparacion)
```




```{r}
dim(filter(vgventas, Global_Sales<2))[1] / dim(vgventas)[1]

```





